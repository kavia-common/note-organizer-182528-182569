{"is_source_file": true, "format": "JavaScript", "description": "This is a source file implementing database connection management and schema initialization for a note-organizer backend, utilizing 'better-sqlite3' for SQLite interactions, with environment configuration and path resolution.", "external_files": ["better-sqlite3", "fs", "path", "dotenv", "url"], "external_methods": ["Database", "dotenv.config", "fileURLToPath", "path.dirname", "path.resolve", "fs.existsSync", "fs.mkdirSync"], "published": ["getDb"], "classes": [], "methods": [{"name": "getDb()", "description": "Returns a singleton database instance, initializing the database and its schema on first call.", "scope": "", "scopeKind": ""}, {"name": "initializeSchema(db)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["new Database", "dotenv.config", "initializeSchema", "fs.existsSync", "fs.mkdirSync"], "search-terms": ["Database singleton", "SQLite schema initialization", "database path resolution", "better-sqlite3", "notes table"], "state": 2, "file_id": 23, "knowledge_revision": 51, "git_revision": "", "ctags": [{"_type": "tag", "name": "DB_PATH", "path": "/home/kavia/workspace/code-generation/note-organizer-182528-182569/notes_frontend/note-organizer-182528-182569/backend/src/db.js", "pattern": "/^const DB_PATH = process.env.DB_PATH ? path.resolve(backendRoot, process.env.DB_PATH) : DEFAULT_D/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "DEFAULT_DB_PATH", "path": "/home/kavia/workspace/code-generation/note-organizer-182528-182569/notes_frontend/note-organizer-182528-182569/backend/src/db.js", "pattern": "/^const DEFAULT_DB_PATH = path.join(backendRoot, 'data', 'notes.db');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "__dirname", "path": "/home/kavia/workspace/code-generation/note-organizer-182528-182569/notes_frontend/note-organizer-182528-182569/backend/src/db.js", "pattern": "/^const __dirname = path.dirname(__filename);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "__filename", "path": "/home/kavia/workspace/code-generation/note-organizer-182528-182569/notes_frontend/note-organizer-182528-182569/backend/src/db.js", "pattern": "/^const __filename = fileURLToPath(import.meta.url);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "backendRoot", "path": "/home/kavia/workspace/code-generation/note-organizer-182528-182569/notes_frontend/note-organizer-182528-182569/backend/src/db.js", "pattern": "/^const backendRoot = path.resolve(__dirname, '..');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "dataDir", "path": "/home/kavia/workspace/code-generation/note-organizer-182528-182569/notes_frontend/note-organizer-182528-182569/backend/src/db.js", "pattern": "/^const dataDir = path.dirname(DB_PATH);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "dbInstance", "path": "/home/kavia/workspace/code-generation/note-organizer-182528-182569/notes_frontend/note-organizer-182528-182569/backend/src/db.js", "pattern": "/^let dbInstance = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "getDb", "path": "/home/kavia/workspace/code-generation/note-organizer-182528-182569/notes_frontend/note-organizer-182528-182569/backend/src/db.js", "pattern": "/^export function getDb() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "initializeSchema", "path": "/home/kavia/workspace/code-generation/note-organizer-182528-182569/notes_frontend/note-organizer-182528-182569/backend/src/db.js", "pattern": "/^function initializeSchema(db) {$/", "language": "JavaScript", "kind": "function", "signature": "(db)"}], "hash": "9fade00cffcadf4198eb061f51a271dd", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/note-organizer-182528-182569/backend/src/db.js", "fields": [{"name": "let dbInstance = null;", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"51": ""}]}