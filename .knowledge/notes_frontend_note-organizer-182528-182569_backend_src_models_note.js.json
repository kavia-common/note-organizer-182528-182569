{"is_source_file": true, "format": "JavaScript", "description": "This file defines the data model and database operations for 'notes' in a note-organizer application. It includes functions for listing, retrieving, creating, updating, and deleting notes, along with helpers for data normalization and query construction.", "external_files": ["../db.js", "uuid"], "external_methods": ["getDb", "uuidv4"], "published": ["list", "get", "create", "update", "remove"], "classes": [], "methods": [{"name": "nowISO()", "description": "Returns the current timestamp as an ISO formatted string.", "scope": "", "scopeKind": ""}, {"name": "mapRow(row)", "description": "Transforms a database row into an API-friendly note object, parsing tags and converting timestamp fields.", "scope": "", "scopeKind": ""}, {"name": "buildListWhere({ query, tag, pinned })", "description": "Constructs SQL WHERE clause and parameters for listing notes with optional search, tag, and pinned filters.", "scope": "", "scopeKind": ""}, {"name": "create({ title = '', content = '', tags = [], pinned = false } = {})", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list({ query = '', tag = '', pinned = undefined } = {})", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "remove(id, { soft = true } = {})", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "update(id, payload = {})", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["getDb()", "uuidv4()", "JSON.parse()", "JSON.stringify()", "new Date().toISOString()", "db.prepare()", "db.prepare().run()", "db.prepare().get()"], "search-terms": ["note model", "notes CRUD", "notes database operations", "tags parsing", "soft delete notes", "note listing filters", "note timestamp normalization"], "state": 2, "file_id": 25, "knowledge_revision": 56, "git_revision": "", "ctags": [{"_type": "tag", "name": "buildListWhere", "path": "/home/kavia/workspace/code-generation/note-organizer-182528-182569/notes_frontend/note-organizer-182528-182569/backend/src/models/note.js", "pattern": "/^function buildListWhere({ query, tag, pinned }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ query, tag, pinned })"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/note-organizer-182528-182569/notes_frontend/note-organizer-182528-182569/backend/src/models/note.js", "pattern": "/^    content: payload.content !== undefined ? payload.content : existing.content,$/", "language": "JavaScript", "kind": "property", "scope": "update.next", "scopeKind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/note-organizer-182528-182569/notes_frontend/note-organizer-182528-182569/backend/src/models/note.js", "pattern": "/^export function create({ title = '', content = '', tags = [], pinned = false } = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "({ title = '', content = '', tags = [], pinned = false } = {})"}, {"_type": "tag", "name": "db", "path": "/home/kavia/workspace/code-generation/note-organizer-182528-182569/notes_frontend/note-organizer-182528-182569/backend/src/models/note.js", "pattern": "/^  const db = getDb();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/note-organizer-182528-182569/notes_frontend/note-organizer-182528-182569/backend/src/models/note.js", "pattern": "/^export function list({ query = '', tag = '', pinned = undefined } = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "({ query = '', tag = '', pinned = undefined } = {})"}, {"_type": "tag", "name": "mapRow", "path": "/home/kavia/workspace/code-generation/note-organizer-182528-182569/notes_frontend/note-organizer-182528-182569/backend/src/models/note.js", "pattern": "/^function mapRow(row) {$/", "language": "JavaScript", "kind": "function", "signature": "(row)"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/note-organizer-182528-182569/notes_frontend/note-organizer-182528-182569/backend/src/models/note.js", "pattern": "/^  const next = {$/", "language": "JavaScript", "kind": "class", "scope": "update", "scopeKind": "class"}, {"_type": "tag", "name": "nowISO", "path": "/home/kavia/workspace/code-generation/note-organizer-182528-182569/notes_frontend/note-organizer-182528-182569/backend/src/models/note.js", "pattern": "/^function nowISO() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "pinned", "path": "/home/kavia/workspace/code-generation/note-organizer-182528-182569/notes_frontend/note-organizer-182528-182569/backend/src/models/note.js", "pattern": "/^    pinned: payload.pinned !== undefined ? !!payload.pinned : !!existing.pinned,$/", "language": "JavaScript", "kind": "property", "scope": "update.next", "scopeKind": "class"}, {"_type": "tag", "name": "remove", "path": "/home/kavia/workspace/code-generation/note-organizer-182528-182569/notes_frontend/note-organizer-182528-182569/backend/src/models/note.js", "pattern": "/^export function remove(id, { soft = true } = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, { soft = true } = {})"}, {"_type": "tag", "name": "row", "path": "/home/kavia/workspace/code-generation/note-organizer-182528-182569/notes_frontend/note-organizer-182528-182569/backend/src/models/note.js", "pattern": "/^  const row = db$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "tags", "path": "/home/kavia/workspace/code-generation/note-organizer-182528-182569/notes_frontend/note-organizer-182528-182569/backend/src/models/note.js", "pattern": "/^    tags:$/", "language": "JavaScript", "kind": "property", "scope": "update.next", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/note-organizer-182528-182569/notes_frontend/note-organizer-182528-182569/backend/src/models/note.js", "pattern": "/^    title: payload.title !== undefined ? payload.title : existing.title,$/", "language": "JavaScript", "kind": "property", "scope": "update.next", "scopeKind": "class"}, {"_type": "tag", "name": "update", "path": "/home/kavia/workspace/code-generation/note-organizer-182528-182569/notes_frontend/note-organizer-182528-182569/backend/src/models/note.js", "pattern": "/^export function update(id, payload = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, payload = {})"}], "hash": "4f9815aba843f41c4c9522bb686efee8", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/note-organizer-182528-182569/backend/src/models/note.js", "fields": [{"name": "content: payload.content !== undefined ? payload.content : existing.content,", "scope": "update.next", "scopeKind": "class", "description": "unavailable"}, {"name": "pinned: payload.pinned !== undefined ? !!payload.pinned : !!existing.pinned,", "scope": "update.next", "scopeKind": "class", "description": "unavailable"}, {"name": "tags:", "scope": "update.next", "scopeKind": "class", "description": "unavailable"}, {"name": "title: payload.title !== undefined ? payload.title : existing.title,", "scope": "update.next", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"56": ""}]}